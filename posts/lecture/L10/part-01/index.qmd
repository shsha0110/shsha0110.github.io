---
title: "[Causal Inference] 10. Potential Outcome Framework (Part 1)"
description: "Introduction"
author: "유성현"
date: "2026-01-23"
categories: [Causal Inference]
format:
  html:
    toc: true
    number-sections: false
    code-fold: show
    math: true
---

# 1. Introduction: Why Causal Frameworks?

사회과학, 의학, 정책학 등 다양한 분야에서 우리는 단순히 현상을 서술하는 것을 넘어, **"무엇이 무엇을 야기했는가?"**라는 인과적 질문에 답하고자 합니다. 하지만 직관적인 인과관계를 수학적이고 통계적인 언어로 형식화(formalize)하는 것은 쉽지 않은 문제입니다.

인과추론(Causal Inference)을 위한 프레임워크는 크게 두 가지 주류가 존재합니다.

1.  **Potential Outcome Framework (Neyman-Rubin Causal Model):** 인과추론을 **'결측 데이터(Missing Data)'**의 문제로 바라보는 관점입니다. Neyman(1923)과 Rubin(1974)에 의해 정립되었으며, 사회과학과 의학 분야에서 가장 널리 사용됩니다.
2.  **Causal Diagram Framework (Pearl):** 그래프 이론(DAGs)을 기반으로 변수 간의 구조적 관계를 도식화하는 관점입니다 (Pearl, 2009).

이 포스트에서는 첫 번째 접근법인 **Potential Outcome (PO) Framework**를 다룹니다. 이 프레임워크는 관찰된 데이터가 생성되는 과정(Assignment Mechanism)을 명시적으로 모델링함으로써, 우리가 관찰하지 못한 '반사실(Counterfactual)'을 어떻게 추론할 것인지에 대한 통계적 토대를 제공합니다.

---

# 2. Basic Concepts of PO Framework

Potential Outcome Framework를 이해하기 위해서는 몇 가지 핵심적인 정의가 필요합니다.

## 2.1. Unit (개체)
Unit은 처치(Treatment)가 적용되는 대상(사람, 장소, 사물 등)을 의미합니다. 중요한 점은 **"특정 시점(at a particular time)"**이 정의에 포함된다는 것입니다.
* 예: 동일한 사람이라도 2024년의 나와 2025년의 나는 다른 Unit으로 취급될 수 있습니다.

## 2.2. Treatment (처치)
연구자가 그 효과를 평가하고자 하는 개입(Intervention)입니다.
* $X=1$: 처치를 받은 상태 (Active Treatment)
* $X=0$: 처치를 받지 않은 상태 (Control)

## 2.3. Potential Outcomes (잠재적 결과)
이 프레임워크의 핵심입니다. 각 Unit에 대해 처치 여부에 따라 **잠재적으로 존재할 수 있는 두 가지 결과**를 정의합니다.

* $Y(1)$: 처치를 받았을 때($X=1$) 관찰되었을 결과
* $Y(0)$: 처치를 받지 않았을 때($X=0$) 관찰되었을 결과

여기서 $Y(1)$과 $Y(0)$는 처치가 실제로 일어났는지와 무관하게, **사전에 결정되어 있는(pre-existing)** 값으로 간주합니다. 이를 **Counterfactuals(반사실)**이라고도 부릅니다.

## 2.4. Causal Effect (인과 효과)
개별 Unit $i$에 대한 인과 효과(Individual Causal Effect)는 두 잠재적 결과의 차이로 정의됩니다.

$$
\tau_i = Y_i(1) - Y_i(0)
$$

즉, "내가 약을 먹었을 때의 혈압"과 "내가 약을 먹지 않았을 때의 혈압"의 차이가 바로 약의 인과 효과입니다.

---

# 3. The Fundamental Problem of Causal Inference

인과추론이 어려운 이유는 우리가 **두 잠재적 결과를 동시에 관찰할 수 없기 때문**입니다. 이를 **인과추론의 근본적인 문제(The Fundamental Problem of Causal Inference)**라고 합니다 (Holland, 1986).

현실 세계에서 각 Unit은 처치를 받거나($X=1$) 받지 않거나($X=0$) 둘 중 하나의 상태에만 놓일 수 있습니다. 따라서 우리는 $Y(1)$과 $Y(0)$ 중 하나만 관찰할 수 있으며, 나머지는 영원히 알 수 없는 **결측치(Missing Data)**가 됩니다.

![Figure 1: 잠재적 결과와 결측 데이터의 구조. 각 Unit에 대해 $Y(1)$과 $Y(0)$ 중 실제로 관찰된(Observed) 것은 하나뿐이며, 나머지는 물음표(?)로 표시된 결측치임을 보여준다. 인과추론은 이 물음표를 채워넣는 과정으로 볼 수 있다.](./images/missing_data_table.png)

위 표(Figure 1)에서 볼 수 있듯이,
* Unit 1은 처치를 받아서($X=1$) $Y(1)$은 관찰되지만 $Y(0)$는 결측입니다.
* Unit 2는 처치를 받지 않아서($X=0$) $Y(0)$는 관찰되지만 $Y(1)$은 결측입니다.

## 3.1. Neyman's Urn Model
이 상황은 통계학자 Neyman이 제안한 **Urn Model(항아리 모델)**로 비유할 수 있습니다.

![Figure 2: Neyman의 Urn Model 도식. 각 상자(Unit) 안에는 두 개의 표($Y_1, Y_0$)가 들어있지만, 우리가 관찰할 수 있는 것은 그중 선택된 하나뿐이다. 그림자 처리된 부분은 관찰되지 않은 잠재적 결과(Missing Data)를 의미한다.](./images/neyman_urn_model.png)

우리의 데이터셋은 마치 여러 개의 상자(Unit)들이 있고, 각 상자 안에 두 개의 티켓($Y(1), Y(0)$)이 들어있는 것과 같습니다. 우리는 각 상자에서 오직 하나의 티켓만 뽑아볼 수 있습니다. 인과추론은 뽑지 않은 나머지 티켓의 값을 추론하는 문제입니다.

---

# 4. SUTVA: From Potential to Observed

우리가 관찰하는 데이터 $Y$와 잠재적 결과 $Y(1), Y(0)$를 연결하기 위해서는 중요한 가정이 필요합니다. 바로 **SUTVA(Stable Unit Treatment Value Assumption)**입니다.

## 4.1. Assumption: SUTVA
SUTVA는 크게 두 가지 하위 가정으로 구성됩니다 (Rubin, 1980).

1.  **No Interference (상호 간섭 없음):**
    한 Unit의 잠재적 결과는 다른 Unit의 처치 여부에 영향을 받지 않습니다. 즉, 나의 결과는 오직 나의 처치 여부에만 달려있어야 합니다.
    * *위반 사례:* 백신 접종 (내 친구가 백신을 맞으면, 내가 안 맞아도 감염 확률이 낮아짐), 소셜 네트워크 효과, 광고 효과 등.

2.  **No Hidden Variations of Treatment (처치의 일관성):**
    처치는 단일한 버전만 존재해야 합니다. "처치를 받았다"는 상태가 Unit마다 다르지 않아야 합니다.
    * *위반 사례:* 수술(의사의 숙련도에 따라 같은 수술도 결과가 다름), 약의 복용량 차이 등.

## 4.2. Mathematical Connection
SUTVA가 성립할 때, 관찰된 결과 $Y_i$는 처치 상태 $X_i$에 따라 다음과 같이 **Consistency Assumption**으로 연결됩니다.

$$
\text{If } X_i = 1 \text{, then } Y_i = Y_i(1) \\
\text{If } X_i = 0 \text{, then } Y_i = Y_i(0)
$$

이를 하나의 수식으로 표현하면 다음과 같은 **Switching Equation**을 얻을 수 있습니다.

$$
Y_i = X_i Y_i(1) + (1 - X_i) Y_i(0)
$$

이 식은 인과추론의 수리적 전개에서 가장 기초가 되는 항등식입니다. $X_i$가 1이면 앞의 항만 남고, 0이면 뒤의 항만 남아 관찰된 $Y_i$가 결정됩니다.

---

# 5. Causal Estimands (인과 추정량)

개별 Unit의 인과 효과($Y_i(1) - Y_i(0)$)는 결측 문제로 인해 직접 계산할 수 없습니다. 따라서 우리는 집단 수준의 평균적인 효과, 즉 **Estimand(추정량)**를 정의하여 추정합니다.

## 5.1. Difference-based Estimands (차이 기반)

가장 일반적으로 사용되는 척도입니다.

### Average Treatment Effect (ATE)
전체 모집단(Population)에 대한 평균적인 처치 효과입니다.

$$
\tau_{ATE} = \mathbb{E}[Y_i(1) - Y_i(0)] = \mathbb{E}[Y_i(1)] - \mathbb{E}[Y_i(0)]
$$

### Average Treatment Effect for the Treated (ATT)
실제로 처치를 받은 집단($X=1$)에 한정된 평균 처치 효과입니다. 정책 평가 등에서 "실제 수혜자가 얻은 이득"을 측정할 때 유용합니다.

$$
\tau_{ATT} = \mathbb{E}[Y_i(1) - Y_i(0) \mid X_i = 1]
$$
여기서 $\mathbb{E}[Y_i(0) \mid X_i = 1]$은 **Counterfactual**입니다. (실제로는 처치를 받았지만, 만약 안 받았다면 어땠을까에 대한 기댓값)

### Conditional Average Treatment Effect (CATE)
특정 공변량(Covariate) $Z$를 가진 하위 집단에서의 평균 효과입니다. 이질적인 처치 효과(Heterogeneous Treatment Effect)를 분석할 때 사용합니다.
* 예: "30대 남성"에게 미치는 약의 효과

$$
\tau(z) = \mathbb{E}[Y_i(1) - Y_i(0) \mid Z = z]
$$

## 5.2. Ratio-based Estimands (비율 기반)

결과변수가 연속형(Continuous)인 경우 차이를 많이 쓰지만, 의학이나 보건학에서 이진(Binary) 결과변수를 다룰 때는 비율 척도도 자주 사용됩니다.

* **Individual Relative Effect:** $r_i = Y_i(1) / Y_i(0)$
* **Population Relative Risk:** $RR = \mathbb{E}[Y_i(1)] / \mathbb{E}[Y_i(0)]$
* **Relative Causal Effect (Lift):**
    $$
    \text{Lift} = \frac{\mathbb{E}[Y_i(1) - Y_i(0)]}{\mathbb{E}[Y_i(0)]} = \frac{\mathbb{E}[Y_i(1)]}{\mathbb{E}[Y_i(0)]} - 1
    $$

**주의:** 인과 효과가 모든 개인에게 일정(Homogeneous)하지 않다면, 개인별 비율의 평균($\mathbb{E}[r_i]$)과 모집단 평균의 비율($RR$)은 같지 않습니다.

---

# 6. Summary

이번 포스트에서는 인과추론의 가장 기초가 되는 **Potential Outcome Framework**를 살펴보았습니다.

1.  **Missing Data Problem:** 인과추론은 본질적으로 관찰되지 않은 반사실($Y(1)$ 혹은 $Y(0)$)을 추론하는 결측 데이터 문제입니다.
2.  **SUTVA:** 우리가 관찰한 데이터와 잠재적 결과를 연결하기 위해서는 '간섭 없음'과 '일관성'이라는 강력한 가정이 필요합니다.
3.  **Estimands:** 개별 효과를 알 수 없으므로, 우리는 ATE, ATT, CATE와 같은 평균적인 효과를 목표(Target)로 설정하여 분석을 진행합니다.

다음 포스트에서는 이러한 Estimand를 실제로 데이터로부터 추정(Estimate)하기 위해 필요한 **식별 가정(Identifiability Assumptions)**들, 특히 Ignorability(Unconfoundedness)에 대해 다루겠습니다.

---

### Appendix: Document Verification Checklist

| Section | Content Requirement | Verification Status | Note |
|:---:|:---|:---:|:---|
| **Intro** | PO Framework vs Causal Diagram | ✅ | p.3 내용 반영 (Ref: Pearl, Richardson) |
| **History** | Neyman, Rubin, Fisher references | ✅ | p.4 역사적 배경 및 논문 인용 포함 |
| **Core** | Unit, Treatment, Potential Outcome Def | ✅ | p.5 정의 포함 |
| **Missing Data** | Fundamental Problem (Holland) | ✅ | p.6-8 결측 데이터 테이블 개념 설명 |
| **Visual** | Neyman's Urn Model | ✅ | p.9-10 Urn Model 시각화 및 설명 포함 |
| **Assumption** | SUTVA (Interference, Consistency) | ✅ | p.11-12 SUTVA 정의 및 위반 사례(백신) 포함 |
| **Math** | $Y_i = X_i Y_i(1) + (1-X_i) Y_i(0)$ | ✅ | p.11 수식 및 유도 과정 포함 |
| **Estimands** | ATE, ATT, CATE definition | ✅ | p.13 차이 기반 추정량 수식 포함 |
| **Estimands** | Ratio, Lift | ✅ | p.14 비율 기반 추정량 수식 포함 |